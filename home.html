<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Text Translator</title>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        input[type="file"], select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        button {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            width: 100%;
        }

        button:hover {
            background: #45a049;
        }

        .result-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            color: #dc3545;
            padding: 10px;
            background: #f8d7da;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-section">
            <div class="input-group">
                <label for="imageInput">Upload Image:</label>
                <input type="file" id="imageInput" accept="image/*">
            </div>

            <div class="input-group">
                <label for="languageSelect">Select Translation Language:</label>
                <select id="languageSelect">
                    <option value="hi">Hindi (हिंदी)</option>
                    <option value="es">Spanish (Español)</option>
                    <option value="fr">French (Français)</option>
                    <option value="de">German (Deutsch)</option>
                    <option value="ja">Japanese (日本語)</option>
                    <option value="ko">Korean (한국어)</option>
                    <option value="zh">Chinese (中文)</option>
                    <option value="ar">Arabic (العربية)</option>
                </select>
            </div>

            <button onclick="processImage()">Extract & Translate Text</button>
        </div>
        <div id="results"></div>
    </div>

    <script>
        async function processImage() {
            const imageInput = document.getElementById('imageInput');
            const languageSelect = document.getElementById('languageSelect');
            const resultsDiv = document.getElementById('results');
            
            if (!imageInput.files[0]) {
                alert('Please select an image first');
                return;
            }

            resultsDiv.innerHTML = '<div class="loading">Processing image... Please wait...</div>';
            
            try {
                // Perform OCR
                const result = await Tesseract.recognize(
                    imageInput.files[0],
                    'eng',
                    { logger: m => console.log(m) }
                );

                // Clean and normalize text
                const words = result.data.text
                    .toLowerCase()
                    .replace(/[^\w\s]/g, '')
                    .split(/\s+/)
                    .filter(word => word.length > 1);

                if (words.length === 0) {
                    resultsDiv.innerHTML = '<div class="error">No readable text found in the image. Please try another image.</div>';
                    return;
                }

                const targetLang = languageSelect.value;
                resultsDiv.innerHTML = '';

                // Using Google Translate API through a proxy service
                const uniqueWords = [...new Set(words)];
                
                for (const word of uniqueWords) {
                    try {
                        // Using fetch API for translation
                        const response = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${targetLang}&dt=t&q=${encodeURIComponent(word)}`);
                        const data = await response.json();
                        const translation = data[0][0][0];

                        // Get meaning in target language
                        const meaningResponse = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${targetLang}&dt=t&q=${encodeURIComponent(`meaning of ${word}`)}`);
                        const meaningData = await meaningResponse.json();
                        const meaning = meaningData[0][0][0];

                        const resultItem = document.createElement('div');
                        resultItem.className = 'result-item';
                        resultItem.innerHTML = `
                            <div style="font-weight: bold; margin-bottom: 5px;">Original: ${word}</div>
                            <div style="color: #2196F3; margin-bottom: 5px;">Translation: ${translation}</div>
                            <div style="color: #4CAF50;">Meaning: ${meaning}</div>
                        `;
                        resultsDiv.appendChild(resultItem);
                    } catch (error) {
                        console.error(`Error translating word "${word}":`, error);
                        continue;
                    }
                }

            } catch (error) {
                console.error('Processing error:', error);
                resultsDiv.innerHTML = '<div class="error">Error processing image. Please try again.</div>';
            }
        }
    </script>
</body>
</html>




